---
title: "Clean Code - 오류 처리"
categories:
  - Clean Code
tags:
  - Clean Code
last_modified_at: 2022-06-06T09:00:00-10:00:00
---

# 오류 처리

- 오류 처리는 프로그램에 반드시 필요한 요소 중 하나이다. 프로그램은 언제나 잘못될 가능성이 존재하고 그것을 바로 잡을 준비가 되어있어야 한다. 오류 처리를 위해서 코드에 부가적으로 추가를 하다보면 정작 하는 일을 파악하기가 힘들어진다. 이로 인해 **예외**를 꼭 사용하는 것이 좋은 것 같다.

## try-catch-finally 문

- 보통 많이 사용되는 언어에서 모두 다 지원되는 예외처리로 다음과 같이 구성하면 좋다.

```java
try {
    // 정상적인 흐름
    // 조건에 따른 throw new Exception();
} catch (InvocationException e) {
    // 로깅 기능을 이용하거나 정보를 담아 예외기록에 의미를 제공하도록 한다.
} catch (NullPointException e) {
    // 로깅 기능을 이용하거나 정보를 담아 예외기록에 의미를 제공하도록 한다.
} // ...
finally {
    // 예외에 상관없이 수행됨.
}
```

```java
public class Hello {
    public void sayHello(String hello) throws Exception {
        if( hello == null ) {
            throw new Exception();
        }
        System.out.println(hello);
    }

    public static void main(String[] args) {
        Hello hello = new Hello();
        try {
            sample.sayHello("Hello");
        } catch (Exception e) {
            System.err.println("Exception 발생");
        }
    }
```

예외를 일으키는 테스트코드를 작성한 후, 테스트를 통과하게 코드를 작성하는 방법을 권장한다고 한다.<br>
예외를 던지게 되면 그때 쯤 테스트가 가능하며 리팩터링이 가능하다. 

**`try`의 트랜잭션 본질을 유지하기 쉽게 만든다.**

오류를 처리하는 방식은 대게 일정하다.

  1. 오류를 기록한다. (ErrorTrace)
  2. 프로그램을 계속 수행해도 좋은지 확인한다.

## 미확인된 예외 사용

위의 코드블럭을 통해서 확인된 예외를 처리하는 것이 좋을지도 모르겠지만, 부가적인 예외처리 과정이 발생되면 호출된 전체에서 `throws` 절을 추가해야 되는 불편함이 생기므로, 중요한 부분이 아니면 미확인 예외의 사용이 비용적인 측면에서 유리할 지도 모른다.

## 예외 클래스 정의

던질 예외를 모두 잡는 것은 좋지만, Wrapper 클래스를 만들어서 코드 중복이 발생되지 않게 관리해줄 수 있다.

## 정상적인 흐름을 정의

`catch` 에서 기능 함수 내의 값이 변경되는 것보다, `try` 안의 흐름을 고쳐서 특수 사례가 발생되지 않게 만들어주는 것이 간결하고 좋다. 물론, 특수한 상황은 언제나 발생이 되므로 충분한 정합성을 고려한 뒤, 작성해주는 것이 좋은 것 같다.

## `null` 을 전달 및 반환

`null` 이 정상적이라고 기대하는 것이 아니라면, **전달 및 반환하지 않는 것이 중요**하다고 한다. 이것은 호출자에게 책임을 떠넘기는 것으로 null 처리를 호출자가 별도로 모두 해주어야 해서 좋지 않다.

## ❗

이 장을 통해서 시스템에서 어떤 식으로 기본적으로 오류처리를 해주는 것이 좋을지 되짚어보게 되었다. `try-catch-finally`를 사용하고 `null`은 최대한 피하면서, 특수 사례 예외 처리는 부분 뿐만 아니라 전체적인 것들을 이해하고 있다면, 문화적 상황 내에서 설득이 된다면 필요에 따라 잘 작성할 수 있을 것 같다는 생각도 들었다.

-----

- Wrapper 클래스 : 여기서 말하는 감싸는 클래스는 반환되는 예외를 포장해서 중복 및 의존성을 줄이고 테스트도 용이하게 만들 수 있다는 것을 말하고 싶어함