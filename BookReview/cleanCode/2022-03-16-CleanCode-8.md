---
title: "Clean Code - 단위 테스트"
categories:
  - Clean Code
tags:
  - Clean Code
last_modified_at: 2022-06-12T09:00:00-10:00:00
---

# 단위 테스트

실제 동작되는 코드를 작성하기 전에 단위 테스트부터 작성해서 최소한의 세 가지 법칙을 지키는 노력을 해야한다고 한다.

## TDD 법칙 세 가지

1. 실패하는 단위 테스트를 작성할 떄까지 실제 코드를 작성하지 않음
2. 컴파일은 실패하지 않으면서 실행히 실패하는 정도로만 단위 테스트를 작성
3. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성

## 깨끗한 테스트 코드 유지하기

지저분해도 빨리인 단위 테스트 코드는 차라리 없는 것이 나은 것 같다. 테스트 코드가 복잡할수록 실제 테스트 케이스를 추가하는 시간 비용이 더 걸리고 통과하기도 힘들고 기존 버전을 바꿔야할 때, 테스트 케이스를 유지하고 보수하는 비용이 어마어마해진다. 그러다가 코드가 망가지고 테스트 또한 무의미해지기 때문에 테스트 코드 또한 실제 코드 못지 않게 중요하다.

## 테스트는 유연성, 유지보수성, 재사용성을 제공

## F.I.R.S.T

- Fast : 테스트는 빨라야 한다.

- Independent : 각 테스트는 서로 의존하면 안된다.

- Repeatable : 반복가능한 테스트 환경에서도 가능해야 한다. 실제 환경, QA 환경, 인터넷이 안되는 환경, 집 가는 도중에도 실행할 수 있어야 한다.

- Self-Validating : 자가검증 테스트는 `bool` 값으로 결과를 내야 한다. 통과 여부를 로그 파일을 읽게 만들지 않는다. 

- Timely : 테스트 코드는 실제 동작할 코드를 작성하기 직전에 작성한다. 실제 코드를 구현한 다음 테스트 코드를 작성하면 코드가 테스트하기 어렵다. 아니면 불가능할지도..


-------

수박 겉핥기 정도로만 훑어보았지만, 테스트가 얼마나 중요하고 출시될 서비스에 많은 기여를 해준다는 것을 알았다. 출시하고 문제가 생겨서 다시 코드를 작성하는 것과 테스트 코드랑 그에 맞는 실행코드를 작성해서 문제가 크게 없는 코드의 시간 차이는 크게 나지 않는 것 같다. 그렇다면 빨리 만드는 것도 중요하지만, 한 번 더 생각을 해서 더 좋은 설계를 가지고 가는 방향 또한 나쁘지 않다는 생각을 했다.