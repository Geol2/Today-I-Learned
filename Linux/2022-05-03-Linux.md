---
title: "Linux"
categories:
  - Linux
tags:
  - Linux
last_modified_at: 2022-05-03T09:00:00-12:00:00
---

# crontab

- 스케줄러와 같은 기능을 하며, 특정시간에 특정 작업을 하는 기능이다.

- `crontab`을 확인하면,

```shell
usage: crontab [-u user] file
       crontab [-u user] { -e | -l | -r }

crontab -l
crontab -e
crontab -r
```
- 흔히, 세 가지로 사용될 수 있는 듯하다.

## crontab -l
- 현재 예약 실행 중인 작업들의 리스트를 보여준다.

## crontab -l > [파일경로].txt
- 현재 예약 실행 중인 작업들의 리스트를 백업한다.

## crontab -e
- 현제 예약 실행 중인 작업들의 리스트를 편집할 수 있다.

## crontab -r
- 현재 예약 실행 중인 작업들의 리스트를 삭제한다.

## 주기별 예제

### 간단한 설명

```markdown
*  * *  *   *      /home/cron/test.sh
분 시 일 월 요일(0-7)  실행할 명령어

분(0-59)
시(0-23)
일(0-31)
월(1-12)
요일(0-7, (0,7)=일요일, 1=월 ...)
명령어(실행할 명령어)
```

### 간단한 예제

```shell
* * * * * /home/cron/test.sh
```
- 매 분 test.sh를 실행한다.

```shell
0,20,40 * * * * /home/cron/test.sh
```
- 매일 매 시간마다 0, 20, 40분에 test.sh를 실행한다.

```shell
0-30 * * * * /home/cron/test.sh
```
- 매일 매 시간마다 0~30분까지 매분 test.sh를 실행한다.

```shell
*/5 * * * * * /home/cron/test.sh
```
- 매일 매 시간마다 5분마다 test.sh를 실행한다.


## Codeigniter4 crontab 관련 예제

- 크론탭에서 `클래스명` `함수명`/`파라미터`로 크론을 생성할 수 있다.

```shell

* * * * * /usr/bin/php -q [클래스명] [함수명] >> [로그파일위치]/*.log

* * * * * /usr/bin/php -q [클래스명] [함수명]/[파라미터명]/*.log

```

---

# vi 관련 명령어

- 자주 쓰이는 것들은 알고 있지만, 잘 사용하지 않거나 자주 쓰이진 않는 것을 정리함.

```markdown
i : 현재 커서에서 편집 시작
a : 현재 커서 한 칸 오른쪽에서 편집 시작

yy : 현재 커서의 전체 행을 복사

p : 현재 커서의 아래에 붙여넣기
P : 현재 커서의 위에 붙여넣기
```

---

# apt-get 원리

## 갑자기 궁금해진 apt-get의 원리
- `apt-get install` 이란 것을 매일매일 쓰다보면 어느정도 감이 오겠지만, 해당 패키지를 install 한다고 실제로 어떤 식으로 동작하는지 공부해보았다.

- 우분투 기준
  1. apt-get 입력
  2. `/etc/apt/sources.list` 파일을 열어서 미러서버 URL주소를 확인한다.
  3. 미러서버가 해당 패키지를 알고 있다. ([링크](https://launchpad.net/ubuntu/+archivemirrors))
  4. 미러서버가 패키지 목록 요청하고 목록만 다운로드한다.
  5. 설치할 패키지를 콘솔 상 출력한다.
  6. `Y` 를 입력하면 해당 패키지를 설치요청을 한다.
  7. 설치할 패키지 파일을 다운로드해서 자동 설치가 된다.

## 우분투 미러서버의 패키지

- main : 우분투에서 공식적으로 지원하는 패키지 모음. 자유롭게 배포 가능.
- restricted : 우분투에서 지원하지만, 자유로운 라이센스 소프트웨어는 아님.
- universe : 리눅스에서 사용할 수 있는 대부분의 소프트웨어로 기술적 지원을 보장하지 않는다. 배포는 자유로울 수도 아닐 수도 있다.
- multiverse : 자유 소프트웨어가 포함되어 있지 않을 수 있고 개인이 라이선스를 관리 해야한다.


# [참고] 라이선스

- 내용이 많으므로 상세한 부분은 추가로 알아보기

## BSD형 라이선스 (Berkeley Software Distribution)

- BSD, MIT, Apache 라이선스 등이 포함되며, 비교적 오랜 역사를 가진 라이선스들이다. 이들 라이선스는 카피레프트(Copyleft) 조항을 포함하지 않으며, 의무사항도 비교적 간단하다.

### BSD License

- BSD( 라이선스는 버클리 대학에서 만든 라이선스로, 소프트웨어를 재배포할 때 저작권 표시를 할 것과 준수 조건 및 보증부인에 대한 고지사항을 소스코드 또는 문서 및 기타자료에 포함할 것을 요구함.
- 적용 사례 : Nginx, BSD 운영체제

#### BSD 4-Clause 라이선스 (Original BSD 혹은 Old BSD 라고도 불림)

 - “광고 조항”이 포함
 - 파생저작물의 모든 홍보물에 “This product includes software developed by the [기관명]” 문구를 포함해야함.

#### BSD 3-Clause 라이선스
 - BSD 4-Clause 라이선스로 배포된 오픈소스가 GPL프로그램을 사용하고 있다면 BSD-3Clause 라이선스로 적용해야한다.

#### BSD 2-Clause 라이선스
 -  BSD 3-Clause 라이선스에서 “제품에 대한 보증이나 홍보에 최초개발자나 기여자의 이름을 사용하지 못한다”는 조항을 삭제한 라이선스이다.


### Apache License

- 아파치소프트웨어재단(Apache Software Foundation)에서 만들어 배포한 라이선스
- 1.0과 1.1 버전은 BSD와 비슷하게 간단한 내용만을 담고 있었지만, 현재 사용되고 있는 2.0 버전은 2004년에 배포된 것으로 비교적 상세한 내용을 담고 있다.
- 배포 시의 의무사항으로는 저작권, 특허, 상표, 권리귀속(attribution)에 대한 고지사항을 소스코드 또는 "NOTICE" 파일 등에 포함할 것과, 수취인에게 라이선스 사본을 제공하도록 요구하고 있으며, 파일을 수정하여 배포할 경우 수정된 파일에 대해 수정사항을 표시한 안내 문구를 첨부할 것을 요구하고 있다. 하지만 카피레프트 조항을 포함하고 있지 않기 때문에 반드시 동일한 라이선스로 배포할 필요는 없으며, 소스코드 제공 의무도 없다는 점에서 기본적으로 BSD 라이선스와 비슷한 것으로 평가할 수 있다.
- 적용 사례 : 하둡, 안드로이드 등등
  - 안드로이드 : 일부 구성요소들은 CPL, EPL, GPL, LGPL 등으로 배포되고 있으며, 이들은 Apache 라이선스가 아닌 각각의 라이선스 규칙을 따라야 한다는 점을 주의해야한다.
  - 안드로이드 구성과 적용된 라이센스
    - APACHE2 bionic/linker
    - APACHE2 dalvik 
    - APACHE2 dalvik/libcore-disabled/instrument
    - APACHE2 dalvik/libcore-disabled/sound 
    - APACHE2 dalvik/libcore/annotation 
    - APACHE2 dalvik/libcore/archive 
    - APACHE2 dalvik/libcore/auth 
    - APACHE2 dalvik/libcore/awt-kernel 
    - APACHE2 dalvik/libcore/crypto 
    - APACHE2 dalvik/libcore/dalvik 
    - APACHE2 dalvik/libcore/logging 
    - APACHE2 dalvik/libcore/luni 
    - APACHE2 dalvik/libcore/luni-kernel 
    - APACHE2 dalvik/libcore/math ...
    - CPL dalvik/libcore/junit 
    - EPL prebuilt/common/eclipse 
    - EPL prebuilt/common/osgi 
    - EPL prebuilt/darwin-x86/swt ... 
    - GPL external/blktrace 
    - GPL external/e2fsprogs 
    - GPL external/e2fsprogs/e2fsck ... 
    - LGPL external/e2fsprogs/lib/blkid 
    - LGPL external/e2fsprogs/lib/e2p ... 
    - MIT external/e2fsprogs/lib/ss 
    - OSL1 external/elfutils 
    - W3C dalvik/libcore/xml

## MIT License

- MIT 라이선스는 미국 매사추세츠공과대학교(MIT)에서 해당 대학 SW 공학도들을 돕기 위해 개발한 라이선스로 라이선스와 저작권 관련 명시만 지켜주면 되는 라이선스
- 적용 사례 : 부트스트랩, Angular.js, jQuery

-----

## GPL형 라이센스 (General Public License)

- FSF(Free Software Foundation)에서 주도하여 만든 것
- BSD형 라이센스와 비슷하지만 카피레프트 조항과 소스코드 제공 의무를 가지고 있다는 점에서 큰 차이
- 카피레프트의 적용 범위 및 소스코드 제공 의무의 범위는 각 라이선스마다 차이가 있음

### GPL 2.0

- GPL 2.0으로 배포되는 오픈소스
  1. 각 복제본에 적절한 저작권 표시와 보증책임이 없음을 명시
  2. GPL 라이선스를 언급하는 고지사항과 보증책임 관련 고지사항을 원본 그대로 유지
  3. 소프트웨어를 양도받는 모든 이들에게 소프트웨어와 함께 GPL 라이선스 사본을 제공
  4. 파일을 수정한 경우 수정했다는 사실과 날짜를 파일에 명기 
  5. 원본저작물과 파생저작물(derivative work)을 GPL 2.0에 의해 배포
  6. 원본저작물 및 파생저작물에 대한 소스코드를 제공하거나, 요청 시 제공하겠다는 약정서를 제공
  
  - 여기서 1 ~ 4의 의무사항은 Apache 라이선스와 동일하거나 유사한 내용이지만, 5 및 6의 의무사항은 BSD형의 라이선스에서는 찾아볼 수 없는 내용
  - 파생저작물에 대한 범위는 일반적으로 계약이나 법 조항이 명확하지 않은 경우, 당사자의 의도나 거래 관행 등을 종합적으로 고려하여 법원에서 결정, GPL 라이선스가 명확하지 않은 부분이 많다.

  -  GPL로 배포된 소프트웨어를 수정하였거나 새로운 소프트웨어에 정적 링크시키는 경우, 즉 두 개의 모듈이 동일한 실행 파일에 포함되어 있을 경우는 해당 실행 파일에 포함된 모든 소스는 GPL이 적용
  
  - 동일한 바이너리에 포함되지 않더라도 동적 링크 등의 방식으로 공유주소영역에서 링크되어 실행되도록 설계된 경우, 플러그인이 동적으로 링크되어 함수를 호출하고 데이터구조를 공유하는 경우에도 GPL 소프트웨어와 함께 링크되어 실행되는 소프트웨어에도 GPL이 적용되어 소스코드를 제공

- 적용 사례 : 리눅스 커널
- 예시 : GPL 2.0에 대한 FSF의 해석에 따르면, 커널과 동적 링크된 모듈은 파생저작물에 해당하기 때문에 원칙적으로 소스코드를 제공해야 합니다. 그런데, “정상적인 시스템 콜에 의해 커널 서비스를 이용하는 User Program은 GPL 2.0의 적용을 받지 않는다”는 리눅스 커널 라이선스 문구를 인용하면서, 커널 모듈 표준 인터페이스를 사용할 경우에는 예외적으로 GPL이 적용되지 않는다는 견해도 있습니다. 실제로 일부 기업들은 디바이스 드라이버에 대한 소스코드를 제공하지 않고 있습니다.리눅스 커널 모듈에 GPL이 적용되는지에 대한 문제는 아직 명확한 해석이나 판결이 없습니다. 최소한 앞에서 설명한 세 가지를 만족하지 못한다면 커널 모듈은 GPL의 적용을 받는 것이 명백하고, 만족한다 하더라도 이는 법원의 명확한 판결이 아니므로, 직접적인 소송에서는 다른 판단이 나올 수도 있습니다. 따라서 각 기업에서는 소스코드를 제공하든지, 아니면 법적 리스크를 감수하면서 자사의 영업비밀로 보호하는 전략을 취하는 등의 전략적인 판단

- 추가적인 자료가 엄청 많다. 꽤나 논란이 많은 것 같다.

### GPL 3.0
  1. 각 복제본에 저작권 고지와 보증책임이 없음을 명시할 것
  2. GPL 3.0의 조건 및 제7조의 조건에 관한 내용을 있는 그대로 유지할 것
  3. 소프트웨어를 양도받는 모든 이들에게 소프트웨어와 함께 GPL 라이선스 사본을 제공할 것
  4. 소프트웨어를 수정했을 경우 수정사실 및 일시를 명시할 것
  5. 원본저작물과 그에 기반한 저작물(Work based on the program)을 GPL 3.0에 의해 배포할 것
  6. 원본저작물 및 그에 기반한 저작물(Work based on the program)에 대한 소스코드를 제공하거나, 요청 시 제공하겠다는 약정서를 제공할 것
  7. 사용자 제품(user product : 통상적인 소비자 제품이나 집안에서 쓰일 목적으로 설계되었거나 판매되는 제품)에 대한 인증키 등 설치정보(installation information : 통상적인 소비자 제품이나 집안에서 쓰일 목적으로 설계되었거나 판매되는 제품)를 제공할 것
  8. 차별적인 특허 라이선스 계약을 체결하지 말 것 등의 내용이 포함
  9. ... 등이 있다.

  - 1 ~ 6은 기존 GPL 2.0과 동일하다.
  - 7 및 8의 내용은 더욱 논란을 일으켰다.

### Affero GPL(AGPL)

- BSD, Apache, GPL, LGPL, MPL, EPL 등 대다수의 오픈소스 라이선스들은 해당 소프트웨어를 복제하여 ‘배포(distribute)’할 때 지켜야 하는 다양한 요구사항들을 규정하고 있다. 이를 반대로 해석하면 해당 소프트웨어를 배포하지 않고 기업이 해당 오픈소스를 내부적으로만 사용하거나 네트워크 서버 형태로 이용하고 있는 경우에는 라이선스에 따른 의무사항들이 거의 없다는 점
- 기존의 GPL 라이선스를 변경하여 서버에 의해 서비스를 제공하는 경우에도 카피레프트 조항과 소스코드 제공 의무가 적용. 서버 형태로 소프트웨어를 이용하는 경우에도 적용된다는 점

- 적용 사례 : 몽고 디비

### Lesser GPL(LGPL)

- 주로 라이브러리에 사용하기 위해 FSF가 GPL과는 별도로 만든 라이선스

  1. 각 복제본에 적절한 저작권 안내와 보증책임이 없음을 명시할 것
  2. LGPL 라이선스를 언급하는 안내 사항과 보증책임 관련 고지사항을 원본 그대로 유지할 것
  3. 소프트웨어를 양도받는 모든 이들에게 소프트웨어와 함께 LGPL 라이선스 사본을 제공할 것
  4. 라이브러리 형태로의 수정을 허용하며, 만약 수정한 경우 수정사실과 날짜를 파일에 명기할 것
  4. 원본저작물과 파생저작물을 LGPL 또는 GPL에 의해 배포할 것
  5. 원본저작물 및 파생저작물에 대한 소스코드를 제공하거나, 요청 시 제공하겠다는 약정서를 제공할 것
  6. 응용프로그램을 배포할 경우, LGPL 라이브러리를 사용하고 있다는 사실을 명시할 것
  7. 사용자가 라이브러리를 수정해도 응용프로그램을 사용할 수 있도록 (예를 들어 응용프로그램의 오브젝트 코드를 제공하거나, 해당 라이브러리의 형태를 공유 라이브러리 방식 등을 이용하여) 허용할 것
  8. ...등이 있다. 
  
  - 4가 두개가 있다. (나도잘모름ㅋ)
  - 1~5의 내용은 GPL 2.0과 동일하거나 유사하지만, 6~7은 LGPL에 특유한 내용

- 적용 사례 : GNU C Library
- 상담 사례
  1. 자체개발한 라이브러리의 라이선스 선택
  2. LGPL인 Java 라이브러리(Jar) 사용
  3. 오픈소스를 이용한 웹서비스
  4.  GPL과 LGPL의 양립성

## MPL형 라이선스

- 주로 기업들이 주도하는 오픈소스 프로젝트에서 사용하는 라이선스로 MPL, CDDL, EPL 등이 포함된다.
- 처음부터 법률가들이 참여하여 만들었기 때문에 소프트웨어 라이선스의 관점에서는 더욱 정교하다고 볼 수 있지만, 프로그래머들에게는 그만큼 복잡하고 이해하기 어려운 라이선스들이다. 카피레프트 조항을 포함하고 있다는 점에서 GPL형과 비슷하지만, 적용 범위와 소스코드 제공범위는 GPL보다는 LGPL에 가까운 것


### Mozilla Public License (MPL)

1. 원 코드에 포함된 저작권표시, 개발자 및 권리자에 관한 사항들을 그대로 표시할 것
2. 배포 시 MPL 라이선스 사본을 첨부할 것
3. 수정했을 경우에는 최초개발자의 코드로부터 파생되었다는 사실, 수정사항 및 날짜 등을 포함한 파일(Exhibit A)을 소스코드의 각 파일에 포함할 것
4. 원본 및 수정코드를 MPL에 의해 배포할 것
5. 수정코드에 대한 소스코드를 전자배포방식 등을 통해 제공할 것
6. MPL 코드를 사용할 때 제3자의 지식재산권에 의한 라이선스가 필요하다는 사실을 알고 있는 경우 “LEGAL” 파일에 관련 내용을 포함할 것
7. ...등이 있다.

- 적용 사례 :  Firefox 웹브라우저

## CDDL

- 썬(sun)이 자사의 유닉스 운영체제인 솔라리스를 오픈소스로 배포하면서 만든 라이선스
  1. 저작권 등 권리관련 사항, 라이선스 관련 사항 등의 고지사항을 제거하거나 변경할 수 없음.
  2. 배포 시 CDDL 라이선스 사본을 첨부
  3. 수정한 경우 수정코드의 기여자임을 밝힘
  4. 원본 및 수정코드를 CDDL에 의해 배포
  5. 수정코드에 대한 소스코드를 합리적인 방식으로 제공

- 적용 사례 : 오픈 솔라리스

### CPL, EPL

- IBM이 이클립스(Eclipse) 등 오픈소스 프로젝트를 진행하면서 만든 라이선스
  
  1. 각 코드의 저작권 고지사항을 제거하거나 변경하지 말 것
  2. EPL 라이선스 사본을 포함할 것
  3. 각 기여물의 창작자를 식별할 수 있도록 신분을 밝힐 것
  4. 오브젝트코드로 배포하는 경우 EPL 조건을 준수하고, 보증부인 및 책임배제에 관한 내용과 소스코드의 확보방법을 알려 줄 것
  5. 소스코드로 배포하는 경우 EPL 라이선스를 적용할 것
  6. 상업적 배포의 경우 기여자에게 책임이 발생하지 않도록 조치할 것 등의 내용을 포함
  7. ...

- 적용 사례 : 이클립스


## 기타

### Beerware License

- 맥주를 사주면 쓸 수 있는 라이선스?!
- 언젠가 만나면 맥주 한 잔 사달라고 한다.

```text
"THE BEER-WARE LICENSE" (Revision 42):
<phk@FreeBSD.ORG> wrote this file. As long as you retain this notice you can do whatever you want with this stuff. If we meet some day, and you think this stuff is worth it, you can buy me a beer in return Poul-Henning Kamp
```

## 라이선스 확인방법

- 직접 확인하는 방법 : 코드 안에 주석
- 도구를 이용하는 방법

  - 코드 스캔
    1. FOSSology : GPL 2.0 
    2. Ninka : GPL 3.0 
    3. TripleCheck : AGPL 3.0
  - 문자 탐색
    1. Black Duck Protex
    2. Palamida
    3. OpenLogic (현재 Rogue Wave)
    4. Protecode (현재 Synopsis)
  - 바이너리 스캔 도구
    - 3rd Party로부터 소프트웨어를 받을 때는 대부분 소스코드 없이 바이너리 형태로 입수
    1. BAT : 오픈소스 기반 (Apache 2.0, 단, 데이터베이스는 상용)
    2. Codenomicon AppCheck40) (현재는 Synopsis) : 상용 도구

------

- 위에 사용된 정보
  -  오픈소스 라이선스 가이드 3.0 https://olis.or.kr/images/egovframework/olisImage/common/OpensourceSW_License_Guide.pdf