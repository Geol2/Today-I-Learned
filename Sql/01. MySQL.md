---
title: "MYSQL"
categories:
  - MySQL
tags:
  - MySQL
last_modified_at: 2022-09-23T21:00:00-22:00
---

# 사용자 및 권한

- 외부 접속 허용 방법

```sql
CREATE USER '계정명'@'%' identified by '패스워드';
GRANT ALL PRIVILEGES ON *.* to '계정명'@'%';
FLUSH PRIVILEGES;
```

## 사용자 식별

- `'svc_id'@'192.168.0.10' (123)` 은 로컬호스트에서 svc_id라는 아이디로만 접속이 가능하다.
- `'svc_id'@'%' (abc)` %문자는 모든 IP 또는 모든 호스팅명을 의미한다.
- 위의 두 계정 중 MySQL은 첫번째 계정부터 먼저 선택하고 인증을 실행한다. 범위가 좁은 것부터 찾기 때문에 svc_id로 abc 비밀번호를 입력하면 비밀번호 오류로 접속할 수 없다.

### AWS 접속 중 에러 

```shell
RSA public key is not available client side (option serverRsaPublicKeyFile not set)
```

DBeaver 에서 다음과 같은 설정을 별도로 해줌

### Driver Properties

```shell
useSSL : FALSE
allowPublicKeyRetrieval : TRUE
```

--- 

# CAST()

- 특정 데이터 타입의 값을 형변환 시켜주는 함수

## Syntax

```sql
CAST(value AS datatype)
```

| Parameter |                             Description                              |
| :-------: | :------------------------------------------------------------------: |
|   value   |                         The value to convert                         |
| datatype  | DATE, DATETIME, DECIMAL, TIME, CHAR, NCHAR, SIGNED, UNSIGNED, BINARY |

```sql
SELECT CAST("2017-08-29" AS DATE)
```

```sql
SELECT CAST("14:06:10" AS TIME)
```

```sql
SELECT CAST(5-10 AS SIGNED)
```

```sql
SELECT CAST(150 AS CHAR)
```
---

# 🗨 데이터 모델링

- 현실 세계를 데이터베이스로 표현하기 위한 추상화
- 고객과의 의사소통을 통해 고객의 업무 문맥이나 프로세스들을 파악하는 것이 중요하다

## 특징 (단명추!)

- 추상화 : 현실세계를 표현
- 단순화 : 누구나 쉽게 이해할 수 있게 표현
- 명확성 : 명확한 한 가지의 의미를 표현

## 모델링 단계

### 개념적 모델링 

- 업무 전체와 프로세스 파악, 중요한 부분만 모델링. 기술적 언어는 쓰지 않음

### 논리적 모델링

- 개념적 모델링을 논리적으로 변환하는 작업
- 식별자 도출과 관계 및 속성 모두를 표현한다
- 정규화를 통해 재사용성을 올린다

### 물리적 모델링

- 데이터베이스를 실제 구축하여 성능, 보안, 가용성을 고려해서 구축함

## 스키마 3단계 구조

- 스키마 ? 정보를 통합하고 조직화하는 개념 및 틀
- 논리적 독립성 : 개념 스키마가 변경되더라도 외부 스키마는 영향을 미치면 안됨
- 물리적 독립성 : 내부 스키마가 변경되더라도 개념 스키마는 영향을 미치면 안됨

### 외부 스키마

- 응용 프로그램이 접근하는 데이터베이스를 정의한다

### 개념 스키마

- 설계자 관점, 사용자 전체 집단의 데이터베이스 구조
- 통합 데이터베이스 구조

### 내부 스키마

- 실제 저장되는 물리적 저장구조
- 필드 및 인덱스, 레코드 구조 등을 나타낸다.

## 엔터티

### 엔터티 정의

> 엔터티는 변별할 수 있는 사물<br>
> - Peter Chen(1976)<br>

---

> 정보를 저장할 수 있는 어떤 것<br>
> - James Martin(1989)<br>

---

> 데이터베이스 내부에서 변별 가능한 객체<br>
> - C.J Date(1986)<br>

---

> 정보가 저장될 수 있는 장소, 사물, 사건, 개념, 물건 등이다.<br>
> - Thomas Bruce(1992)

---

### 엔터티 특징

- 식별자 : 회원번호 및 회원 아이디 값은 유일한 식별자
- 인스턴스 집합 : 고객 정보는 2명 이상 있어야하는 것과 같은 인스턴스
- 속성 : 회원ID, 패스워드, 주소, 전화번호와 같은 속성
- 관계 : 고객은 계좌를 개설하는 것과 같은 관계
- 업무 : 업무에서 관리되어야 하는 집합

## 속성

- 기본 속성 : 프로세스에서 도출되는 본래의 속성
- 설계 속성 : 데이터 모델링 과정에서 나타나는 속성으로 유일 값을 부여함
- 파생 속성 : 다른 속성에 의해서 만들어지는 속성

## 관계

### 존재 관계

- 엔터티 간의 상태를 의미
- 고객이 은행에 회원가입을 하면 관리점이 할당되고 할당된 관리점에서 고객을 관리한다

### 행위 관계

- 엔터티 간에 어떤 행위가 있는 것
- 증권회사는 계좌를 개설해서 주문을 발주하는 관계가 만들어짐

## 엔터티 식별자

- 식별자 : *엔터티를 대표할 수 있는 유일성을 만족하는 속성*

- 주식별자
  - 최소성 : 최소성을 만족하는 키
  - 대표성 : 엔터티를 대표
  - 유일성 : 엔터티의 인스턴스를 유일하게 식별
  - 불변성 : 자주 변경되지 않아야한다

- 키의 종류
  - 후보키 : 유일성과 최소성을 만족하는 키
  - 기본키 : 후보키 중에서 엔터티를 대표할 수 있는 키
  - 대체키 : 여러 개의 후보키 중에서 기본키를 선정하고 남은 키
  - 외래키 : 하나 또는 다수의 다른 테이블의 기본 키 필드를 가리키는 것으로 참조 무결성을 확인하기 위해서 사용되는 키

<img src="/assets/images/PK1.png">

<img src="/assets/images/PK2.png">

- 대표성 여부에 따른 종류
  - 주식별자(PK) : 유일성과 최소성을 만족시키며 엔터티를 대표하는 식별자
  - 보조 식별자 : 대표성을 만족시키지 못한 식별자

- 생성 여부에 따른 종류
  - 내부 식별자
    - 엔터티 내부에서 스스로 생성됨
  - 외부 식별자 (FK)
    - 다른 엔터티와의 관계로 만들어지는 식별자
    - 계좌 엔터티의 `회원ID` 같은 경우

- 대체 여부에 따른 종류
  - 본질 식별자
    - 비즈니스 프로세스에서 만들어지는 식별자
  - 인조 식별자
    - 인위적으로 만들어지는 식별자
    - ex1) 계좌번호 : 지점코드 + 상품코드 + 일련번호

- 속성의 수에 따른 종류
  - 단일 식별자 : 하나의 속성으로 구성
  - 복합 식별자 : 두 개 이상의 속성으로 구성

-----
# ❗ 참고
- 속성 : 업무에서 관리되는 정보, 하나만 가지는 값
- 관계 : 엔터티 간의 관련성 의미하며 존재 관계와 행위 관계로 분류
- 도메인 : 속성이 가질 수 있는 범위